{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../lib/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":29,"index":189}}],"key":"+Oh+VyeK103zLsUwT5Mv/nxNndY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _libApi = require(_dependencyMap[2], \"../lib/api\");\n  var api = _interopDefault(_libApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const [storedUser, accessToken] = await AsyncStorage.default.multiGet(['user', 'accessToken']);\n        if (storedUser[1] && accessToken[1]) {\n          setUser(JSON.parse(storedUser[1]));\n          // Optionally fetch fresh user data\n          await refreshUser();\n        }\n      } catch (error) {\n        console.error('Failed to load user:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await api.default.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          accessToken,\n          refreshToken,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.multiSet([['accessToken', accessToken], ['refreshToken', refreshToken], ['user', JSON.stringify(userData)]]);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const response = await api.default.post('/auth/register', data);\n        const {\n          accessToken,\n          refreshToken,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.multiSet([['accessToken', accessToken], ['refreshToken', refreshToken], ['user', JSON.stringify(userData)]]);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        const refreshToken = await AsyncStorage.default.getItem('refreshToken');\n        if (refreshToken) {\n          await api.default.post('/auth/logout', {\n            refreshToken\n          });\n        }\n      } catch (error) {\n        console.error('Logout error:', error);\n      } finally {\n        await AsyncStorage.default.multiRemove(['accessToken', 'refreshToken', 'user']);\n        setUser(null);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/profile');\n        const userData = response.data;\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":142,"map":[[15,2,28,0,"Object"],[15,8,28,0],[15,9,28,0,"defineProperty"],[15,23,28,0],[15,24,28,0,"exports"],[15,31,28,0],[16,4,28,0,"enumerable"],[16,14,28,0],[17,4,28,0,"get"],[17,7,28,0],[17,18,28,0,"get"],[17,19,28,0],[18,6,28,0],[18,13,28,0,"AuthProvider"],[18,25,28,0],[19,4,28,0],[20,2,28,0],[21,2,117,0,"Object"],[21,8,117,0],[21,9,117,0,"defineProperty"],[21,23,117,0],[21,24,117,0,"exports"],[21,31,117,0],[22,4,117,0,"enumerable"],[22,14,117,0],[23,4,117,0,"get"],[23,7,117,0],[23,18,117,0,"get"],[23,19,117,0],[24,6,117,0],[24,13,117,0,"useAuth"],[24,20,117,0],[25,4,117,0],[26,2,117,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_libApi"],[30,13,3,0],[30,16,3,0,"require"],[30,23,3,0],[30,24,3,0,"_dependencyMap"],[30,38,3,0],[31,2,3,0],[31,6,3,0,"api"],[31,9,3,0],[31,12,3,0,"_interopDefault"],[31,27,3,0],[31,28,3,0,"_libApi"],[31,35,3,0],[32,2,3,29],[32,6,3,29,"_reactJsxDevRuntime"],[32,25,3,29],[32,28,3,29,"require"],[32,35,3,29],[32,36,3,29,"_dependencyMap"],[32,50,3,29],[33,2,26,0],[33,8,26,6,"AuthContext"],[33,19,26,17],[33,35,26,20],[33,39,26,20,"createContext"],[33,45,26,33],[33,46,26,33,"createContext"],[33,59,26,33],[33,61,26,63,"undefined"],[33,70,26,72],[33,71,26,73],[34,2,28,7],[34,8,28,13,"AuthProvider"],[34,20,28,25],[34,23,28,28,"AuthProvider"],[34,24,28,29],[35,4,28,31,"children"],[36,2,28,65],[36,3,28,66],[36,8,28,71],[37,4,28,71,"_s"],[37,6,28,71],[38,4,29,2],[38,10,29,8],[38,11,29,9,"user"],[38,15,29,13],[38,17,29,15,"setUser"],[38,24,29,22],[38,25,29,23],[38,28,29,26],[38,32,29,26,"useState"],[38,38,29,34],[38,39,29,34,"useState"],[38,47,29,34],[38,49,29,48],[38,53,29,52],[38,54,29,53],[39,4,30,2],[39,10,30,8],[39,11,30,9,"loading"],[39,18,30,16],[39,20,30,18,"setLoading"],[39,30,30,28],[39,31,30,29],[39,34,30,32],[39,38,30,32,"useState"],[39,44,30,40],[39,45,30,40,"useState"],[39,53,30,40],[39,55,30,41],[39,59,30,45],[39,60,30,46],[40,4,32,2],[40,8,32,2,"useEffect"],[40,14,32,11],[40,15,32,11,"useEffect"],[40,24,32,11],[40,26,32,12],[40,32,32,18],[41,6,33,4,"loadUser"],[41,14,33,12],[41,15,33,13],[41,16,33,14],[42,4,34,2],[42,5,34,3],[42,7,34,5],[42,9,34,7],[42,10,34,8],[43,4,36,2],[43,10,36,8,"loadUser"],[43,18,36,16],[43,21,36,19],[43,27,36,19,"loadUser"],[43,28,36,19],[43,33,36,31],[44,6,37,4],[44,10,37,8],[45,8,38,6],[45,14,38,12],[45,15,38,13,"storedUser"],[45,25,38,23],[45,27,38,25,"accessToken"],[45,38,38,36],[45,39,38,37],[45,42,38,40],[45,48,38,46,"AsyncStorage"],[45,60,38,58],[45,61,38,58,"default"],[45,68,38,58],[45,69,38,59,"multiGet"],[45,77,38,67],[45,78,38,68],[45,79,38,69],[45,85,38,75],[45,87,38,77],[45,100,38,90],[45,101,38,91],[45,102,38,92],[46,8,39,6],[46,12,39,10,"storedUser"],[46,22,39,20],[46,23,39,21],[46,24,39,22],[46,25,39,23],[46,29,39,27,"accessToken"],[46,40,39,38],[46,41,39,39],[46,42,39,40],[46,43,39,41],[46,45,39,43],[47,10,40,8,"setUser"],[47,17,40,15],[47,18,40,16,"JSON"],[47,22,40,20],[47,23,40,21,"parse"],[47,28,40,26],[47,29,40,27,"storedUser"],[47,39,40,37],[47,40,40,38],[47,41,40,39],[47,42,40,40],[47,43,40,41],[47,44,40,42],[48,10,41,8],[49,10,42,8],[49,16,42,14,"refreshUser"],[49,27,42,25],[49,28,42,26],[49,29,42,27],[50,8,43,6],[51,6,44,4],[51,7,44,5],[51,8,44,6],[51,15,44,13,"error"],[51,20,44,18],[51,22,44,20],[52,8,45,6,"console"],[52,15,45,13],[52,16,45,14,"error"],[52,21,45,19],[52,22,45,20],[52,44,45,42],[52,46,45,44,"error"],[52,51,45,49],[52,52,45,50],[53,6,46,4],[53,7,46,5],[53,16,46,14],[54,8,47,6,"setLoading"],[54,18,47,16],[54,19,47,17],[54,24,47,22],[54,25,47,23],[55,6,48,4],[56,4,49,2],[56,5,49,3],[57,4,51,2],[57,10,51,8,"login"],[57,15,51,13],[57,18,51,16],[57,24,51,16,"login"],[57,25,51,23,"email"],[57,30,51,36],[57,32,51,38,"password"],[57,40,51,54],[57,45,51,59],[58,6,52,4],[58,10,52,8],[59,8,53,6],[59,14,53,12,"response"],[59,22,53,20],[59,25,53,23],[59,31,53,29,"api"],[59,34,53,32],[59,35,53,32,"default"],[59,42,53,32],[59,43,53,33,"post"],[59,47,53,37],[59,48,53,38],[59,61,53,51],[59,63,53,53],[60,10,53,55,"email"],[60,15,53,60],[61,10,53,62,"password"],[62,8,53,71],[62,9,53,72],[62,10,53,73],[63,8,54,6],[63,14,54,12],[64,10,54,14,"accessToken"],[64,21,54,25],[65,10,54,27,"refreshToken"],[65,22,54,39],[66,10,54,41,"user"],[66,14,54,45],[66,16,54,47,"userData"],[67,8,54,56],[67,9,54,57],[67,12,54,60,"response"],[67,20,54,68],[67,21,54,69,"data"],[67,25,54,73],[68,8,56,6],[68,14,56,12,"AsyncStorage"],[68,26,56,24],[68,27,56,24,"default"],[68,34,56,24],[68,35,56,25,"multiSet"],[68,43,56,33],[68,44,56,34],[68,45,57,8],[68,46,57,9],[68,59,57,22],[68,61,57,24,"accessToken"],[68,72,57,35],[68,73,57,36],[68,75,58,8],[68,76,58,9],[68,90,58,23],[68,92,58,25,"refreshToken"],[68,104,58,37],[68,105,58,38],[68,107,59,8],[68,108,59,9],[68,114,59,15],[68,116,59,17,"JSON"],[68,120,59,21],[68,121,59,22,"stringify"],[68,130,59,31],[68,131,59,32,"userData"],[68,139,59,40],[68,140,59,41],[68,141,59,42],[68,142,60,7],[68,143,60,8],[69,8,62,6,"setUser"],[69,15,62,13],[69,16,62,14,"userData"],[69,24,62,22],[69,25,62,23],[70,6,63,4],[70,7,63,5],[70,8,63,6],[70,15,63,13,"error"],[70,20,63,23],[70,22,63,25],[71,8,64,6],[71,14,64,12],[71,18,64,16,"Error"],[71,23,64,21],[71,24,64,22,"error"],[71,29,64,27],[71,30,64,28,"response"],[71,38,64,36],[71,40,64,38,"data"],[71,44,64,42],[71,46,64,44,"detail"],[71,52,64,50],[71,56,64,54],[71,70,64,68],[71,71,64,69],[72,6,65,4],[73,4,66,2],[73,5,66,3],[74,4,68,2],[74,10,68,8,"register"],[74,18,68,16],[74,21,68,19],[74,27,68,26,"data"],[74,31,68,44],[74,35,68,49],[75,6,69,4],[75,10,69,8],[76,8,70,6],[76,14,70,12,"response"],[76,22,70,20],[76,25,70,23],[76,31,70,29,"api"],[76,34,70,32],[76,35,70,32,"default"],[76,42,70,32],[76,43,70,33,"post"],[76,47,70,37],[76,48,70,38],[76,64,70,54],[76,66,70,56,"data"],[76,70,70,60],[76,71,70,61],[77,8,71,6],[77,14,71,12],[78,10,71,14,"accessToken"],[78,21,71,25],[79,10,71,27,"refreshToken"],[79,22,71,39],[80,10,71,41,"user"],[80,14,71,45],[80,16,71,47,"userData"],[81,8,71,56],[81,9,71,57],[81,12,71,60,"response"],[81,20,71,68],[81,21,71,69,"data"],[81,25,71,73],[82,8,73,6],[82,14,73,12,"AsyncStorage"],[82,26,73,24],[82,27,73,24,"default"],[82,34,73,24],[82,35,73,25,"multiSet"],[82,43,73,33],[82,44,73,34],[82,45,74,8],[82,46,74,9],[82,59,74,22],[82,61,74,24,"accessToken"],[82,72,74,35],[82,73,74,36],[82,75,75,8],[82,76,75,9],[82,90,75,23],[82,92,75,25,"refreshToken"],[82,104,75,37],[82,105,75,38],[82,107,76,8],[82,108,76,9],[82,114,76,15],[82,116,76,17,"JSON"],[82,120,76,21],[82,121,76,22,"stringify"],[82,130,76,31],[82,131,76,32,"userData"],[82,139,76,40],[82,140,76,41],[82,141,76,42],[82,142,77,7],[82,143,77,8],[83,8,79,6,"setUser"],[83,15,79,13],[83,16,79,14,"userData"],[83,24,79,22],[83,25,79,23],[84,6,80,4],[84,7,80,5],[84,8,80,6],[84,15,80,13,"error"],[84,20,80,23],[84,22,80,25],[85,8,81,6],[85,14,81,12],[85,18,81,16,"Error"],[85,23,81,21],[85,24,81,22,"error"],[85,29,81,27],[85,30,81,28,"response"],[85,38,81,36],[85,40,81,38,"data"],[85,44,81,42],[85,46,81,44,"detail"],[85,52,81,50],[85,56,81,54],[85,77,81,75],[85,78,81,76],[86,6,82,4],[87,4,83,2],[87,5,83,3],[88,4,85,2],[88,10,85,8,"logout"],[88,16,85,14],[88,19,85,17],[88,25,85,17,"logout"],[88,26,85,17],[88,31,85,29],[89,6,86,4],[89,10,86,8],[90,8,87,6],[90,14,87,12,"refreshToken"],[90,26,87,24],[90,29,87,27],[90,35,87,33,"AsyncStorage"],[90,47,87,45],[90,48,87,45,"default"],[90,55,87,45],[90,56,87,46,"getItem"],[90,63,87,53],[90,64,87,54],[90,78,87,68],[90,79,87,69],[91,8,88,6],[91,12,88,10,"refreshToken"],[91,24,88,22],[91,26,88,24],[92,10,89,8],[92,16,89,14,"api"],[92,19,89,17],[92,20,89,17,"default"],[92,27,89,17],[92,28,89,18,"post"],[92,32,89,22],[92,33,89,23],[92,47,89,37],[92,49,89,39],[93,12,89,41,"refreshToken"],[94,10,89,54],[94,11,89,55],[94,12,89,56],[95,8,90,6],[96,6,91,4],[96,7,91,5],[96,8,91,6],[96,15,91,13,"error"],[96,20,91,18],[96,22,91,20],[97,8,92,6,"console"],[97,15,92,13],[97,16,92,14,"error"],[97,21,92,19],[97,22,92,20],[97,37,92,35],[97,39,92,37,"error"],[97,44,92,42],[97,45,92,43],[98,6,93,4],[98,7,93,5],[98,16,93,14],[99,8,94,6],[99,14,94,12,"AsyncStorage"],[99,26,94,24],[99,27,94,24,"default"],[99,34,94,24],[99,35,94,25,"multiRemove"],[99,46,94,36],[99,47,94,37],[99,48,94,38],[99,61,94,51],[99,63,94,53],[99,77,94,67],[99,79,94,69],[99,85,94,75],[99,86,94,76],[99,87,94,77],[100,8,95,6,"setUser"],[100,15,95,13],[100,16,95,14],[100,20,95,18],[100,21,95,19],[101,6,96,4],[102,4,97,2],[102,5,97,3],[103,4,99,2],[103,10,99,8,"refreshUser"],[103,21,99,19],[103,24,99,22],[103,30,99,22,"refreshUser"],[103,31,99,22],[103,36,99,34],[104,6,100,4],[104,10,100,8],[105,8,101,6],[105,14,101,12,"response"],[105,22,101,20],[105,25,101,23],[105,31,101,29,"api"],[105,34,101,32],[105,35,101,32,"default"],[105,42,101,32],[105,43,101,33,"get"],[105,46,101,36],[105,47,101,37],[105,62,101,52],[105,63,101,53],[106,8,102,6],[106,14,102,12,"userData"],[106,22,102,20],[106,25,102,23,"response"],[106,33,102,31],[106,34,102,32,"data"],[106,38,102,36],[107,8,103,6],[107,14,103,12,"AsyncStorage"],[107,26,103,24],[107,27,103,24,"default"],[107,34,103,24],[107,35,103,25,"setItem"],[107,42,103,32],[107,43,103,33],[107,49,103,39],[107,51,103,41,"JSON"],[107,55,103,45],[107,56,103,46,"stringify"],[107,65,103,55],[107,66,103,56,"userData"],[107,74,103,64],[107,75,103,65],[107,76,103,66],[108,8,104,6,"setUser"],[108,15,104,13],[108,16,104,14,"userData"],[108,24,104,22],[108,25,104,23],[109,6,105,4],[109,7,105,5],[109,8,105,6],[109,15,105,13,"error"],[109,20,105,18],[109,22,105,20],[110,8,106,6,"console"],[110,15,106,13],[110,16,106,14,"error"],[110,21,106,19],[110,22,106,20],[110,47,106,45],[110,49,106,47,"error"],[110,54,106,52],[110,55,106,53],[111,6,107,4],[112,4,108,2],[112,5,108,3],[113,4,110,2],[113,24,111,4],[113,28,111,4,"_reactJsxDevRuntime"],[113,47,111,4],[113,48,111,4,"jsxDEV"],[113,54,111,4],[113,56,111,5,"AuthContext"],[113,67,111,16],[113,68,111,17,"Provider"],[113,76,111,25],[114,6,111,26,"value"],[114,11,111,31],[114,13,111,33],[115,8,111,35,"user"],[115,12,111,39],[116,8,111,41,"loading"],[116,15,111,48],[117,8,111,50,"login"],[117,13,111,55],[118,8,111,57,"register"],[118,16,111,65],[119,8,111,67,"logout"],[119,14,111,73],[120,8,111,75,"refreshUser"],[121,6,111,87],[121,7,111,89],[122,6,111,89,"children"],[122,14,111,89],[122,16,112,7,"children"],[123,4,112,15],[124,6,112,15,"fileName"],[124,14,112,15],[124,16,112,15,"_jsxFileName"],[124,28,112,15],[125,6,112,15,"lineNumber"],[125,16,112,15],[126,6,112,15,"columnNumber"],[126,18,112,15],[127,4,112,15],[127,11,113,26],[127,12,113,27],[128,2,115,0],[128,3,115,1],[129,2,115,2,"_s"],[129,4,115,2],[129,5,28,13,"AuthProvider"],[129,17,28,25],[130,2,28,25,"_c"],[130,4,28,25],[130,7,28,13,"AuthProvider"],[130,19,28,25],[131,2,117,7],[131,8,117,13,"useAuth"],[131,15,117,20],[131,18,117,23,"useAuth"],[131,19,117,23],[131,24,117,29],[132,4,117,29,"_s2"],[132,7,117,29],[133,4,118,2],[133,10,118,8,"context"],[133,17,118,15],[133,20,118,18],[133,24,118,18,"useContext"],[133,30,118,28],[133,31,118,28,"useContext"],[133,41,118,28],[133,43,118,29,"AuthContext"],[133,54,118,40],[133,55,118,41],[134,4,119,2],[134,8,119,6],[134,9,119,7,"context"],[134,16,119,14],[134,18,119,16],[135,6,120,4],[135,12,120,10],[135,16,120,14,"Error"],[135,21,120,19],[135,22,120,20],[135,64,120,62],[135,65,120,63],[136,4,121,2],[137,4,122,2],[137,11,122,9,"context"],[137,18,122,16],[138,2,123,0],[138,3,123,1],[139,2,123,2,"_s2"],[139,5,123,2],[139,6,117,13,"useAuth"],[139,13,117,20],[140,2,117,20],[140,6,117,20,"_c"],[140,8,117,20],[141,2,117,20,"$RefreshReg$"],[141,14,117,20],[141,15,117,20,"_c"],[141,17,117,20],[142,0,117,20],[142,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;4BC2B;YCI;GDE;mBEE;GFa;gBGE;GHe;mBIE;GJe;iBKE;GLY;sBME;GNS;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}