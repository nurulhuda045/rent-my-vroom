{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../lib/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":29,"index":189}}],"key":"+Oh+VyeK103zLsUwT5Mv/nxNndY=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _libApi = require(_dependencyMap[2], \"../lib/api\");\n  var api = _interopDefault(_libApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const [storedUser, accessToken] = await AsyncStorage.default.multiGet(['user', 'accessToken']);\n        if (storedUser[1] && accessToken[1]) {\n          setUser(JSON.parse(storedUser[1]));\n          // Optionally fetch fresh user data\n          await refreshUser();\n        }\n      } catch (error) {\n        console.error('Failed to load user:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await api.default.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          accessToken,\n          refreshToken,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.multiSet([['accessToken', accessToken], ['refreshToken', refreshToken], ['user', JSON.stringify(userData)]]);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const response = await api.default.post('/auth/register', data);\n        const {\n          accessToken,\n          refreshToken,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.multiSet([['accessToken', accessToken], ['refreshToken', refreshToken], ['user', JSON.stringify(userData)]]);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      try {\n        const refreshToken = await AsyncStorage.default.getItem('refreshToken');\n        if (refreshToken) {\n          await api.default.post('/auth/logout', {\n            refreshToken\n          });\n        }\n      } catch (error) {\n        console.error('Logout error:', error);\n      } finally {\n        await AsyncStorage.default.multiRemove(['accessToken', 'refreshToken', 'user']);\n        setUser(null);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/profile');\n        const userData = response.data;\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":133,"map":[[13,2,28,0,"Object"],[13,8,28,0],[13,9,28,0,"defineProperty"],[13,23,28,0],[13,24,28,0,"exports"],[13,31,28,0],[14,4,28,0,"enumerable"],[14,14,28,0],[15,4,28,0,"get"],[15,7,28,0],[15,18,28,0,"get"],[15,19,28,0],[16,6,28,0],[16,13,28,0,"AuthProvider"],[16,25,28,0],[17,4,28,0],[18,2,28,0],[19,2,117,0,"Object"],[19,8,117,0],[19,9,117,0,"defineProperty"],[19,23,117,0],[19,24,117,0,"exports"],[19,31,117,0],[20,4,117,0,"enumerable"],[20,14,117,0],[21,4,117,0,"get"],[21,7,117,0],[21,18,117,0,"get"],[21,19,117,0],[22,6,117,0],[22,13,117,0,"useAuth"],[22,20,117,0],[23,4,117,0],[24,2,117,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_libApi"],[28,13,3,0],[28,16,3,0,"require"],[28,23,3,0],[28,24,3,0,"_dependencyMap"],[28,38,3,0],[29,2,3,0],[29,6,3,0,"api"],[29,9,3,0],[29,12,3,0,"_interopDefault"],[29,27,3,0],[29,28,3,0,"_libApi"],[29,35,3,0],[30,2,3,29],[30,6,3,29,"_reactJsxDevRuntime"],[30,25,3,29],[30,28,3,29,"require"],[30,35,3,29],[30,36,3,29,"_dependencyMap"],[30,50,3,29],[31,2,26,0],[31,8,26,6,"AuthContext"],[31,19,26,17],[31,35,26,20],[31,39,26,20,"createContext"],[31,45,26,33],[31,46,26,33,"createContext"],[31,59,26,33],[31,61,26,63,"undefined"],[31,70,26,72],[31,71,26,73],[32,2,28,7],[32,8,28,13,"AuthProvider"],[32,20,28,25],[32,23,28,28,"AuthProvider"],[32,24,28,29],[33,4,28,31,"children"],[34,2,28,65],[34,3,28,66],[34,8,28,71],[35,4,29,2],[35,10,29,8],[35,11,29,9,"user"],[35,15,29,13],[35,17,29,15,"setUser"],[35,24,29,22],[35,25,29,23],[35,28,29,26],[35,32,29,26,"useState"],[35,38,29,34],[35,39,29,34,"useState"],[35,47,29,34],[35,49,29,48],[35,53,29,52],[35,54,29,53],[36,4,30,2],[36,10,30,8],[36,11,30,9,"loading"],[36,18,30,16],[36,20,30,18,"setLoading"],[36,30,30,28],[36,31,30,29],[36,34,30,32],[36,38,30,32,"useState"],[36,44,30,40],[36,45,30,40,"useState"],[36,53,30,40],[36,55,30,41],[36,59,30,45],[36,60,30,46],[37,4,32,2],[37,8,32,2,"useEffect"],[37,14,32,11],[37,15,32,11,"useEffect"],[37,24,32,11],[37,26,32,12],[37,32,32,18],[38,6,33,4,"loadUser"],[38,14,33,12],[38,15,33,13],[38,16,33,14],[39,4,34,2],[39,5,34,3],[39,7,34,5],[39,9,34,7],[39,10,34,8],[40,4,36,2],[40,10,36,8,"loadUser"],[40,18,36,16],[40,21,36,19],[40,27,36,19,"loadUser"],[40,28,36,19],[40,33,36,31],[41,6,37,4],[41,10,37,8],[42,8,38,6],[42,14,38,12],[42,15,38,13,"storedUser"],[42,25,38,23],[42,27,38,25,"accessToken"],[42,38,38,36],[42,39,38,37],[42,42,38,40],[42,48,38,46,"AsyncStorage"],[42,60,38,58],[42,61,38,58,"default"],[42,68,38,58],[42,69,38,59,"multiGet"],[42,77,38,67],[42,78,38,68],[42,79,38,69],[42,85,38,75],[42,87,38,77],[42,100,38,90],[42,101,38,91],[42,102,38,92],[43,8,39,6],[43,12,39,10,"storedUser"],[43,22,39,20],[43,23,39,21],[43,24,39,22],[43,25,39,23],[43,29,39,27,"accessToken"],[43,40,39,38],[43,41,39,39],[43,42,39,40],[43,43,39,41],[43,45,39,43],[44,10,40,8,"setUser"],[44,17,40,15],[44,18,40,16,"JSON"],[44,22,40,20],[44,23,40,21,"parse"],[44,28,40,26],[44,29,40,27,"storedUser"],[44,39,40,37],[44,40,40,38],[44,41,40,39],[44,42,40,40],[44,43,40,41],[44,44,40,42],[45,10,41,8],[46,10,42,8],[46,16,42,14,"refreshUser"],[46,27,42,25],[46,28,42,26],[46,29,42,27],[47,8,43,6],[48,6,44,4],[48,7,44,5],[48,8,44,6],[48,15,44,13,"error"],[48,20,44,18],[48,22,44,20],[49,8,45,6,"console"],[49,15,45,13],[49,16,45,14,"error"],[49,21,45,19],[49,22,45,20],[49,44,45,42],[49,46,45,44,"error"],[49,51,45,49],[49,52,45,50],[50,6,46,4],[50,7,46,5],[50,16,46,14],[51,8,47,6,"setLoading"],[51,18,47,16],[51,19,47,17],[51,24,47,22],[51,25,47,23],[52,6,48,4],[53,4,49,2],[53,5,49,3],[54,4,51,2],[54,10,51,8,"login"],[54,15,51,13],[54,18,51,16],[54,24,51,16,"login"],[54,25,51,23,"email"],[54,30,51,36],[54,32,51,38,"password"],[54,40,51,54],[54,45,51,59],[55,6,52,4],[55,10,52,8],[56,8,53,6],[56,14,53,12,"response"],[56,22,53,20],[56,25,53,23],[56,31,53,29,"api"],[56,34,53,32],[56,35,53,32,"default"],[56,42,53,32],[56,43,53,33,"post"],[56,47,53,37],[56,48,53,38],[56,61,53,51],[56,63,53,53],[57,10,53,55,"email"],[57,15,53,60],[58,10,53,62,"password"],[59,8,53,71],[59,9,53,72],[59,10,53,73],[60,8,54,6],[60,14,54,12],[61,10,54,14,"accessToken"],[61,21,54,25],[62,10,54,27,"refreshToken"],[62,22,54,39],[63,10,54,41,"user"],[63,14,54,45],[63,16,54,47,"userData"],[64,8,54,56],[64,9,54,57],[64,12,54,60,"response"],[64,20,54,68],[64,21,54,69,"data"],[64,25,54,73],[65,8,56,6],[65,14,56,12,"AsyncStorage"],[65,26,56,24],[65,27,56,24,"default"],[65,34,56,24],[65,35,56,25,"multiSet"],[65,43,56,33],[65,44,56,34],[65,45,57,8],[65,46,57,9],[65,59,57,22],[65,61,57,24,"accessToken"],[65,72,57,35],[65,73,57,36],[65,75,58,8],[65,76,58,9],[65,90,58,23],[65,92,58,25,"refreshToken"],[65,104,58,37],[65,105,58,38],[65,107,59,8],[65,108,59,9],[65,114,59,15],[65,116,59,17,"JSON"],[65,120,59,21],[65,121,59,22,"stringify"],[65,130,59,31],[65,131,59,32,"userData"],[65,139,59,40],[65,140,59,41],[65,141,59,42],[65,142,60,7],[65,143,60,8],[66,8,62,6,"setUser"],[66,15,62,13],[66,16,62,14,"userData"],[66,24,62,22],[66,25,62,23],[67,6,63,4],[67,7,63,5],[67,8,63,6],[67,15,63,13,"error"],[67,20,63,23],[67,22,63,25],[68,8,64,6],[68,14,64,12],[68,18,64,16,"Error"],[68,23,64,21],[68,24,64,22,"error"],[68,29,64,27],[68,30,64,28,"response"],[68,38,64,36],[68,40,64,38,"data"],[68,44,64,42],[68,46,64,44,"detail"],[68,52,64,50],[68,56,64,54],[68,70,64,68],[68,71,64,69],[69,6,65,4],[70,4,66,2],[70,5,66,3],[71,4,68,2],[71,10,68,8,"register"],[71,18,68,16],[71,21,68,19],[71,27,68,26,"data"],[71,31,68,44],[71,35,68,49],[72,6,69,4],[72,10,69,8],[73,8,70,6],[73,14,70,12,"response"],[73,22,70,20],[73,25,70,23],[73,31,70,29,"api"],[73,34,70,32],[73,35,70,32,"default"],[73,42,70,32],[73,43,70,33,"post"],[73,47,70,37],[73,48,70,38],[73,64,70,54],[73,66,70,56,"data"],[73,70,70,60],[73,71,70,61],[74,8,71,6],[74,14,71,12],[75,10,71,14,"accessToken"],[75,21,71,25],[76,10,71,27,"refreshToken"],[76,22,71,39],[77,10,71,41,"user"],[77,14,71,45],[77,16,71,47,"userData"],[78,8,71,56],[78,9,71,57],[78,12,71,60,"response"],[78,20,71,68],[78,21,71,69,"data"],[78,25,71,73],[79,8,73,6],[79,14,73,12,"AsyncStorage"],[79,26,73,24],[79,27,73,24,"default"],[79,34,73,24],[79,35,73,25,"multiSet"],[79,43,73,33],[79,44,73,34],[79,45,74,8],[79,46,74,9],[79,59,74,22],[79,61,74,24,"accessToken"],[79,72,74,35],[79,73,74,36],[79,75,75,8],[79,76,75,9],[79,90,75,23],[79,92,75,25,"refreshToken"],[79,104,75,37],[79,105,75,38],[79,107,76,8],[79,108,76,9],[79,114,76,15],[79,116,76,17,"JSON"],[79,120,76,21],[79,121,76,22,"stringify"],[79,130,76,31],[79,131,76,32,"userData"],[79,139,76,40],[79,140,76,41],[79,141,76,42],[79,142,77,7],[79,143,77,8],[80,8,79,6,"setUser"],[80,15,79,13],[80,16,79,14,"userData"],[80,24,79,22],[80,25,79,23],[81,6,80,4],[81,7,80,5],[81,8,80,6],[81,15,80,13,"error"],[81,20,80,23],[81,22,80,25],[82,8,81,6],[82,14,81,12],[82,18,81,16,"Error"],[82,23,81,21],[82,24,81,22,"error"],[82,29,81,27],[82,30,81,28,"response"],[82,38,81,36],[82,40,81,38,"data"],[82,44,81,42],[82,46,81,44,"detail"],[82,52,81,50],[82,56,81,54],[82,77,81,75],[82,78,81,76],[83,6,82,4],[84,4,83,2],[84,5,83,3],[85,4,85,2],[85,10,85,8,"logout"],[85,16,85,14],[85,19,85,17],[85,25,85,17,"logout"],[85,26,85,17],[85,31,85,29],[86,6,86,4],[86,10,86,8],[87,8,87,6],[87,14,87,12,"refreshToken"],[87,26,87,24],[87,29,87,27],[87,35,87,33,"AsyncStorage"],[87,47,87,45],[87,48,87,45,"default"],[87,55,87,45],[87,56,87,46,"getItem"],[87,63,87,53],[87,64,87,54],[87,78,87,68],[87,79,87,69],[88,8,88,6],[88,12,88,10,"refreshToken"],[88,24,88,22],[88,26,88,24],[89,10,89,8],[89,16,89,14,"api"],[89,19,89,17],[89,20,89,17,"default"],[89,27,89,17],[89,28,89,18,"post"],[89,32,89,22],[89,33,89,23],[89,47,89,37],[89,49,89,39],[90,12,89,41,"refreshToken"],[91,10,89,54],[91,11,89,55],[91,12,89,56],[92,8,90,6],[93,6,91,4],[93,7,91,5],[93,8,91,6],[93,15,91,13,"error"],[93,20,91,18],[93,22,91,20],[94,8,92,6,"console"],[94,15,92,13],[94,16,92,14,"error"],[94,21,92,19],[94,22,92,20],[94,37,92,35],[94,39,92,37,"error"],[94,44,92,42],[94,45,92,43],[95,6,93,4],[95,7,93,5],[95,16,93,14],[96,8,94,6],[96,14,94,12,"AsyncStorage"],[96,26,94,24],[96,27,94,24,"default"],[96,34,94,24],[96,35,94,25,"multiRemove"],[96,46,94,36],[96,47,94,37],[96,48,94,38],[96,61,94,51],[96,63,94,53],[96,77,94,67],[96,79,94,69],[96,85,94,75],[96,86,94,76],[96,87,94,77],[97,8,95,6,"setUser"],[97,15,95,13],[97,16,95,14],[97,20,95,18],[97,21,95,19],[98,6,96,4],[99,4,97,2],[99,5,97,3],[100,4,99,2],[100,10,99,8,"refreshUser"],[100,21,99,19],[100,24,99,22],[100,30,99,22,"refreshUser"],[100,31,99,22],[100,36,99,34],[101,6,100,4],[101,10,100,8],[102,8,101,6],[102,14,101,12,"response"],[102,22,101,20],[102,25,101,23],[102,31,101,29,"api"],[102,34,101,32],[102,35,101,32,"default"],[102,42,101,32],[102,43,101,33,"get"],[102,46,101,36],[102,47,101,37],[102,62,101,52],[102,63,101,53],[103,8,102,6],[103,14,102,12,"userData"],[103,22,102,20],[103,25,102,23,"response"],[103,33,102,31],[103,34,102,32,"data"],[103,38,102,36],[104,8,103,6],[104,14,103,12,"AsyncStorage"],[104,26,103,24],[104,27,103,24,"default"],[104,34,103,24],[104,35,103,25,"setItem"],[104,42,103,32],[104,43,103,33],[104,49,103,39],[104,51,103,41,"JSON"],[104,55,103,45],[104,56,103,46,"stringify"],[104,65,103,55],[104,66,103,56,"userData"],[104,74,103,64],[104,75,103,65],[104,76,103,66],[105,8,104,6,"setUser"],[105,15,104,13],[105,16,104,14,"userData"],[105,24,104,22],[105,25,104,23],[106,6,105,4],[106,7,105,5],[106,8,105,6],[106,15,105,13,"error"],[106,20,105,18],[106,22,105,20],[107,8,106,6,"console"],[107,15,106,13],[107,16,106,14,"error"],[107,21,106,19],[107,22,106,20],[107,47,106,45],[107,49,106,47,"error"],[107,54,106,52],[107,55,106,53],[108,6,107,4],[109,4,108,2],[109,5,108,3],[110,4,110,2],[110,24,111,4],[110,28,111,4,"_reactJsxDevRuntime"],[110,47,111,4],[110,48,111,4,"jsxDEV"],[110,54,111,4],[110,56,111,5,"AuthContext"],[110,67,111,16],[110,68,111,17,"Provider"],[110,76,111,25],[111,6,111,26,"value"],[111,11,111,31],[111,13,111,33],[112,8,111,35,"user"],[112,12,111,39],[113,8,111,41,"loading"],[113,15,111,48],[114,8,111,50,"login"],[114,13,111,55],[115,8,111,57,"register"],[115,16,111,65],[116,8,111,67,"logout"],[116,14,111,73],[117,8,111,75,"refreshUser"],[118,6,111,87],[118,7,111,89],[119,6,111,89,"children"],[119,14,111,89],[119,16,112,7,"children"],[120,4,112,15],[121,6,112,15,"fileName"],[121,14,112,15],[121,16,112,15,"_jsxFileName"],[121,28,112,15],[122,6,112,15,"lineNumber"],[122,16,112,15],[123,6,112,15,"columnNumber"],[123,18,112,15],[124,4,112,15],[124,11,113,26],[124,12,113,27],[125,2,115,0],[125,3,115,1],[126,2,117,7],[126,8,117,13,"useAuth"],[126,15,117,20],[126,18,117,23,"useAuth"],[126,19,117,23],[126,24,117,29],[127,4,118,2],[127,10,118,8,"context"],[127,17,118,15],[127,20,118,18],[127,24,118,18,"useContext"],[127,30,118,28],[127,31,118,28,"useContext"],[127,41,118,28],[127,43,118,29,"AuthContext"],[127,54,118,40],[127,55,118,41],[128,4,119,2],[128,8,119,6],[128,9,119,7,"context"],[128,16,119,14],[128,18,119,16],[129,6,120,4],[129,12,120,10],[129,16,120,14,"Error"],[129,21,120,19],[129,22,120,20],[129,64,120,62],[129,65,120,63],[130,4,121,2],[131,4,122,2],[131,11,122,9,"context"],[131,18,122,16],[132,2,123,0],[132,3,123,1],[133,0,123,2],[133,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;4BC2B;YCI;GDE;mBEE;GFa;gBGE;GHe;mBIE;GJe;iBKE;GLY;sBME;GNS;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}